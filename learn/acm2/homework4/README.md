# 递归求解

递归求解的核心在于，求出递推公式。

而如何求出递推公式的关键在于如何进行正确的分类求解

思考方法比做出题目更重要。

## 例题

```
有排成一行的ｎ个方格，用红(Red)、粉(Pink)、绿(Green)三色涂每个格子，
每格涂一色，要求任何相邻的方格不能同色，
且首尾两格也不同色．求全部的满足要求的涂法
```

## 错排公式

`f[n] = (n-1)(f[n-1]+f[n-2])`

## Catalan Number

## 平面风格问题

- n 条直线最多分平面问题

  题目: n 条直线，最多可以把平面分为多少个区域。

  当有 n-1 条直线时，平面最多被分成了 f（n-1）个区域。
  则第 n 条直线要是切成的区域数最多，就必须与每条直线相交且不能有同一交点。
  这样就会得到 n-1 个交点。
  这些交点将第 n 条直线分为 2 条射线和 n-2 条线断。
  而每条射线和线断将以有的区域一分为二。
  这样就多出了 2+（n-2）个区域。

**故**：

```
  f(n)=f(n-1)+n
  =f(n-2)+(n-1)+n
  ……
  =f(1)+1+2+……+n
  =n(n+1)/2+1
```

- 折线分平面（hdu2050）

  根据直线分平面可知，由交点决定了射线和线段的条数，进而决定了新增的区域数。当 n-1 条折线时，区域数为 f（n-1）。
  为了使增加的区域最多，则折线的两边的线段要和 n-1 条折线的边，即 2*（n-1）条线段相交。
  那么新增的线段数为 4*（n-1），射线数为 2。
  但要注意的是，折线本身相邻的两线段只能增加一个区域。

**故**：

```
  f(n)=f(n-1)+4(n-1)+2-1
  =f(n-1)+4(n-1)+1
  =f(n-2)+4(n-2)+4(n-1)+2
  ……
  =f(1)+4+4*2+……+4(n-1)+(n-1)
  =2n^2-n+1
```

- 封闭曲线分平面问题

**题目大致**:

如设有 n 条封闭曲线画在平面上，而任何两条封闭曲线恰好相交于两点，且任何三条封闭曲线不相交于同一点，问这些封闭曲线把平面分割成的区域个数。

**析**：

当 n-1 个圆时，区域数为 f(n-1).
那么第 n 个圆就必须与前 n-1 个圆相交，则第 n 个圆被分为 2（n-1）段线段，
增加了 2（n-1）个区域。

**故**：

```
f(n)=f(n-1)+2(n-1)
=f(1)+2+4+……+2(n-1)
=n^2-n+2
```

- 平面分割空间问题（hdu1290）

  由二维的分割问题可知，平面分割与线之间的交点有关，即交点决定射线和线段的条数，从而决定新增的区域数。
  试想在三维中则是否与平面的交线有关呢？
  当有 n-1 个平面时，分割的空间数为 f（n-1）。
  要有最多的空间数，则第 n 个平面需与前 n-1 个平面相交，且不能有共同的交线。
  即最多有 n-1 条交线。
  而这 n-1 条交线把第 n 个平面最多分割成 g（n-1）个区域。（g（n）为（1）中的直线分平面的个数 ）
  此平面将原有的空间一分为二，则最多增加 g（n-1）个空间。

**故**：

```
f=f(n-1)+g(n-1) ps:g(n)=n(n+1)/2+1
=f(n-2)+g(n-2)+g(n-1)
……
=f(1)+g(1)+g(2)+……+g(n-1)
=2+(1*2+2*3+3\*4+……+(n-1)n)/2+（n-1）
=(1+2^2+3^2+4^2+……+n^2-1-2-3-……-n )/2+n+1
=(n^3+5n)/6+1
```

## 母牛的故事

> 有一头母牛，它每年年初生一头小母牛。每头小母牛从第四个年头开始，每年年初也生一头小母牛。请编程实现在第 n 年的时候，共有多少头母牛？

这个就是找规律，递归求解。

- f(n) = f(n-1) + f(n-3)


